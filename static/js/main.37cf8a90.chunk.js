(this["webpackJsonpheisenberg-shopping"]=this["webpackJsonpheisenberg-shopping"]||[]).push([[0],{30:function(t,e,n){},38:function(t,e,n){"use strict";n.r(e);var r=n(1),c=n.n(r),a=n(23),i=n.n(a),s=n(14),o=(n(30),n(13)),u=n(2),l=n(3),d=n.n(l),j=n(12),h=n(5),p=n(6),b=n(18),m=n(8),O=n(7);function f(){return g.apply(this,arguments)}function g(){return(g=Object(j.a)(d.a.mark((function t(){var e,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=fetch("https://api.mercadolibre.com/sites/MLB/categories"),t.next=3,e;case 3:return n=t.sent.json(),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t){return x.apply(this,arguments)}function x(){return(x=Object(j.a)(d.a.mark((function t(e){var n,r,c,a,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="https://api.mercadolibre.com/sites/MLB/search?q=".concat(e),r=fetch(n),t.next=4,r;case 4:return c=t.sent.json(),t.next=7,c;case 7:return a=t.sent,i=a.results,t.abrupt("return",i);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(t){return N.apply(this,arguments)}function N(){return(N=Object(j.a)(d.a.mark((function t(e){var n,r,c,a,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="https://api.mercadolibre.com/sites/MLB/search?category=".concat(e),r=fetch(n),t.next=4,r;case 4:return c=t.sent.json(),t.next=7,c;case 7:return a=t.sent,i=a.results,t.abrupt("return",i);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(t){return S.apply(this,arguments)}function S(){return(S=Object(j.a)(d.a.mark((function t(e){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="https://api.mercadolibre.com/items/".concat(e),r=fetch(n).then((function(t){return t.json()})).catch((function(){return new Error("You must provide an url")})),t.abrupt("return",r);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var w=n(0),k=function(t){Object(m.a)(n,t);var e=Object(O.a)(n);function n(){var t;return Object(h.a)(this,n),(t=e.call(this)).renderCategories=Object(j.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:n=e.sent,t.setState({categories:n});case 4:case"end":return e.stop()}}),e)}))),t.handleClick=function(e){(0,t.props.getProducts)(e,"category")},t.state={categories:[]},t}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.renderCategories()}},{key:"render",value:function(){var t=this,e=this.state.categories;return Object(w.jsx)("aside",{className:"categories-container",children:e.map((function(e){var n=e.id,r=e.name;return Object(w.jsx)("button",{id:n,type:"button",onClick:function(){return t.handleClick(n)},className:"category-btn",children:r},n)}))})}}]),n}(r.Component),I=function(t){Object(m.a)(n,t);var e=Object(O.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var t=this.props.cartQuantity;return Object(w.jsx)("div",{className:"cart-button-container",children:Object(w.jsxs)(o.b,{to:"/cart",children:[Object(w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",fill:"currentColor",className:"bi bi-cart3 cart-button",viewBox:"0 0 16 16",children:Object(w.jsx)("path",{d:"M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .49.598l-1 5a.5.5 0 0 1-.465.401l-9.397.472L4.415 11H13a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l.84 4.479 9.144-.459L13.89 4H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"})}),Object(w.jsx)("span",{className:"cart-quantity",children:t})]})})}}]),n}(r.Component),q=function(t){Object(m.a)(n,t);var e=Object(O.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var t=this.props.cartQuantity;return Object(w.jsx)("header",{children:Object(w.jsxs)("div",{className:"header-content",children:[Object(w.jsx)("h1",{children:"Heisenberg Shopping"}),Object(w.jsx)(I,{cartQuantity:t})]})})}}]),n}(c.a.Component);function P(){return Object(w.jsx)("div",{className:"loading-container",children:Object(w.jsxs)("div",{className:"lds-spinner",children:[Object(w.jsx)("div",{}),Object(w.jsx)("div",{}),Object(w.jsx)("div",{}),Object(w.jsx)("div",{}),Object(w.jsx)("div",{}),Object(w.jsx)("div",{}),Object(w.jsx)("div",{}),Object(w.jsx)("div",{}),Object(w.jsx)("div",{}),Object(w.jsx)("div",{}),Object(w.jsx)("div",{}),Object(w.jsx)("div",{})]})})}var L="cart";function M(t){var e=[];if(JSON.parse(localStorage.getItem(L))&&(e=JSON.parse(localStorage.getItem(L))),e.length>0){var n=e.find((function(e){return e.id===t.id}));if(n){if(n.qtd>=n.available_quantity)return null;var r=e.indexOf(n);e[r].qtd+=1,e[r].finalPrice=e[r].qtd*e[r].price}else e.push(t)}else e.push(t);localStorage.setItem(L,JSON.stringify(e))}function B(){var t=JSON.parse(localStorage.getItem(L));return t||[]}var D=function(t){Object(m.a)(n,t);var e=Object(O.a)(n);function n(){var t;Object(h.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(t=e.call.apply(e,[this].concat(c))).addToCart=function(e){var n=t.props.getCartItems;M(Object(s.a)(Object(s.a)({},e),{},{qtd:1,finalPrice:e.price})),n()},t}return Object(p.a)(n,[{key:"render",value:function(){var t=this,e=this.props.products;return Object(w.jsx)("section",{className:"products-container",children:e.map((function(e){return Object(w.jsxs)("div",{className:"card-container",children:[Object(w.jsxs)(o.b,{to:"/heisenberg-shopping/product/".concat(e.id),children:[Object(w.jsx)("div",{className:"product-img-content",children:Object(w.jsx)("img",{src:e.thumbnail,alt:e.title,className:"product-img"})}),Object(w.jsx)("h2",{className:"card-product-title",children:e.title}),Object(w.jsx)("p",{className:"card-product-price",children:e.price.toLocaleString("pt-br",{style:"currency",currency:"BRL"})}),e.shipping.free_shipping&&Object(w.jsx)("p",{className:"free-shipping",children:"Frete Gr\xe1tis"})]}),Object(w.jsx)("button",{className:"add-to-cart-btn",type:"button",onClick:function(){return t.addToCart(e)},children:"Adicionar ao carrinho"})]},e.id)}))})}}]),n}(r.Component),z=n(17),J=function(t){Object(m.a)(n,t);var e=Object(O.a)(n);function n(){var t;return Object(h.a)(this,n),(t=e.call(this)).handleChange=function(e,n){var r=n.value;t.setState(Object(z.a)({},e,r))},t.handleSubmit=function(e){e.preventDefault(),(0,t.props.getProducts)(t.state.search,"query"),t.setState({search:""})},t.state={search:""},t}return Object(p.a)(n,[{key:"render",value:function(){var t=this,e=this.state.search;return Object(w.jsx)("div",{className:"search-container",children:Object(w.jsxs)("form",{onSubmit:function(e){return t.handleSubmit(e)},className:"search-form",children:[Object(w.jsx)("input",{type:"text",value:e,onChange:function(e){var n=e.target;return t.handleChange("search",n)},className:"search-input",placeholder:"Buscar"}),Object(w.jsx)("button",{type:"submit",className:"search-btn",children:Object(w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"currentColor",className:"bi bi-search button-icon search-icon",viewBox:"0 0 16 16",children:Object(w.jsx)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"})})})]})})}}]),n}(r.Component),Q=function(t){Object(m.a)(n,t);var e=Object(O.a)(n);function n(){var t;return Object(h.a)(this,n),(t=e.call(this)).getCartItems=function(){var e=B();t.setState({cartItems:e}),e&&t.setState({quantity:e.length})},t.state={products:[],cartItems:[],quantity:0,loading:!1},t.getProducts=t.getProducts.bind(Object(b.a)(t)),t}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.getCartItems(),this.getProducts("MLB1000","category")}},{key:"getProducts",value:function(){var t=Object(j.a)(d.a.mark((function t(e,n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.setState({loading:!0}),"query"!==n){t.next=5;break}return t.next=4,v(e);case 4:r=t.sent;case 5:if("category"!==n){t.next=9;break}return t.next=8,y(e);case 8:r=t.sent;case 9:this.setState({products:r,loading:!1});case 10:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state,e=t.products,n=t.quantity,r=t.loading;return Object(w.jsxs)("div",{children:[Object(w.jsx)(q,{cartQuantity:n}),Object(w.jsxs)("main",{className:"cat-prod-container",children:[Object(w.jsx)(k,{getProducts:this.getProducts}),Object(w.jsxs)("div",{className:"products-search-container",children:[Object(w.jsx)(J,{getProducts:this.getProducts}),r?Object(w.jsx)(P,{}):Object(w.jsx)(D,{products:e,getCartItems:this.getCartItems})]})]})]})}}]),n}(r.Component),H=function(t){Object(m.a)(n,t);var e=Object(O.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var t=this.props.route;return Object(w.jsx)("div",{children:Object(w.jsx)(o.b,{to:t,children:Object(w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"42",height:"42",fill:"currentColor",className:"bi bi-arrow-left link-return",viewBox:"0 0 16 16",children:Object(w.jsx)("path",{fillRule:"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"})})})})}}]),n}(c.a.Component),F=function(t){Object(m.a)(n,t);var e=Object(O.a)(n);function n(t){var r;return Object(h.a)(this,n),(r=e.call(this,t)).addToCart=function(t){M(Object(s.a)(Object(s.a)({},t),{},{qtd:1,finalPrice:t.price})),r.getCartItems()},r.getProductData=function(){var t=Object(j.a)(d.a.mark((function t(e){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.setState({loading:!0}),t.next=3,C(e);case 3:n=t.sent,r.setState({productData:n,picture:n.pictures[0].url,loading:!1,freeShipping:n.shipping.free_shipping,attributes:n.attributes});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.formatePrice=function(t){if(t)return t.toLocaleString("pt-br",{style:"currency",currency:"BRL"})},r.getCartItems=function(){var t=B();r.setState({cartItems:t}),t&&r.setState({quantity:t.length})},r.state={productData:[],picture:"",loading:!1,freeShipping:!1,cartItems:[],quantity:0,attributes:[]},r}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.match.params.id;this.getProductData(t),this.getCartItems()}},{key:"render",value:function(){var t=this,e=this.state,n=e.productData,r=n.title,c=n.price,a=e.picture,i=e.loading,s=e.freeShipping,o=this.state,u=o.productData,l=o.quantity,d=o.attributes;return Object(w.jsxs)("div",{children:[Object(w.jsx)(q,{cartQuantity:l}),i?Object(w.jsx)(P,{}):Object(w.jsxs)("div",{className:"page-container",children:[Object(w.jsx)(H,{route:"/heisenberg-shopping/"}),Object(w.jsxs)("div",{className:"product-content",children:[Object(w.jsx)("h2",{children:r}),Object(w.jsx)("p",{className:"product-price",children:this.formatePrice(c)}),Object(w.jsxs)("div",{className:"product-detail-container",children:[Object(w.jsx)("div",{className:"product-image-content",children:Object(w.jsx)("img",{className:"product-image",src:a,alt:r})}),Object(w.jsxs)("div",{children:[Object(w.jsx)("h3",{children:"Detalhes do Produto:"}),Object(w.jsx)("ul",{children:d.slice(0,12).map((function(t){return Object(w.jsx)("li",{className:"product-detail-item",children:"".concat(t.name,": ").concat(t.value_name)},t.id)}))})]})]}),s&&Object(w.jsx)("p",{className:"free-shipping",children:"Frete Gr\xe1tis"}),Object(w.jsx)("button",{className:"add-to-cart-btn",type:"button",onClick:function(){return t.addToCart(u)},children:"Adicionar ao carrinho"})]})]})]})}}]),n}(r.Component),T=function(t){Object(m.a)(n,t);var e=Object(O.a)(n);function n(){var t;return Object(h.a)(this,n),(t=e.call(this)).getCartItems=function(){var e=B();t.setState({cartItems:e})},t.increaseQuantity=function(e){M(e),t.getCartItems()},t.decreaseQuantity=function(e){var n="cart",r=JSON.parse(localStorage.getItem(n)),c=r.find((function(t){return t.id===e.id})),a=r.indexOf(c);1!==c.qtd&&(r[a].qtd-=1,r[a].finalPrice=r[a].qtd*r[a].price,localStorage.setItem(n,JSON.stringify(r)),t.getCartItems())},t.removeItem=function(e){!function(t){var e=JSON.parse(localStorage.getItem(L)).filter((function(e){return e.id!==t.id}));localStorage.setItem(L,JSON.stringify(e))}(e),t.getCartItems()},t.state={cartItems:[]},t}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.getCartItems()}},{key:"render",value:function(){var t=this,e=this.state.cartItems,n=0!==e.length;return Object(w.jsxs)("div",{children:[Object(w.jsx)(q,{cartQuantity:e.length}),Object(w.jsxs)("section",{className:"page-container",children:[Object(w.jsx)(H,{route:"/heisenberg-shopping/"}),n?Object(w.jsxs)("div",{children:[e.map((function(e){return Object(w.jsxs)("div",{className:"cart-item-content",children:[Object(w.jsxs)("span",{className:"cart-item-info-container",children:[Object(w.jsx)("button",{className:"cart-item-remove-btn",type:"button",onClick:function(){return t.removeItem(e)},children:"X"}),Object(w.jsx)("img",{className:"cart-item-image",src:e.thumbnail,alt:e.title})]}),Object(w.jsxs)("span",{className:"cart-item-quantity-container",children:[Object(w.jsx)("div",{className:"cart-item-quantity-title-content",children:Object(w.jsx)("h2",{children:e.title})}),Object(w.jsxs)("div",{className:"cart-item-quantity-content",children:[Object(w.jsx)("button",{className:"cart-item-quantity-btn",type:"button",onClick:function(){return t.decreaseQuantity(e)},disabled:1===e.qtd,children:"-"}),Object(w.jsx)("p",{className:"cart-item-quantity",children:e.qtd}),Object(w.jsx)("button",{className:"cart-item-quantity-btn",type:"button",onClick:function(){return t.increaseQuantity(e)},disabled:e.qtd>=e.available_quantity,children:"+"}),Object(w.jsx)("p",{children:e.finalPrice.toLocaleString("pt-br",{style:"currency",currency:"BRL"})})]})]})]},e.id)})),Object(w.jsxs)("span",{className:"final-price-paragraph",children:["Valor total da compra:"," ",e.map((function(t){return t.finalPrice})).reduce((function(t,e){return t+e})).toLocaleString("pt-br",{style:"currency",currency:"BRL"})]})]}):Object(w.jsx)("p",{children:"Seu carrinho est\xe1 vazio!"})]})]})}}]),n}(r.Component);var A=function(){return Object(w.jsx)(o.a,{children:Object(w.jsxs)(u.c,{children:[Object(w.jsx)(u.a,{path:"/heisenberg-shopping/product/:id",render:function(t){return Object(w.jsx)(F,Object(s.a)({},t))}}),Object(w.jsx)(u.a,{path:"/heisenberg-shopping/cart",component:T}),Object(w.jsx)(u.a,{path:"/heisenberg-shopping/",component:Q})]})})},R=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,39)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,a=e.getLCP,i=e.getTTFB;n(t),r(t),c(t),a(t),i(t)}))};i.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(A,{})}),document.getElementById("root")),R()}},[[38,1,2]]]);
//# sourceMappingURL=main.37cf8a90.chunk.js.map